<% provide :title, t(".title") %>
<h2 class="center">
  <span class="glyphicon glyphicon-shopping-cart"></span> <%= t ".title" %>
</h2>
<div class="row">
  <div class="col-md-3 pull-right">
    <%= search_form_for @search, url: admin_products_path,
      class: "navbar-form" do |f| %>
    <%= f.label :display %>
    <%= select_tag :limit,
      options_from_collection_for_select(Settings.admin.user.page_items_limit,
        :second, :second, selected: params[:limit]),
      class: "form-control", id: "items-limit" %>
    <%= f.label :records %>
    <%= f.submit "", class: "invisible" %>
    <% end %>
  </div>

  <div class="col-md-3">
    <%= search_form_for @q, url: admin_products_path,
      class: "navbar-form", role: "search" do |f| %>
      <div class="input-group add-on">
        <%= f.text_field :name_cont, class: "form-control",
          placeholder: t(".name_search") %>
        <div class="input-group-btn">
          <%= button_tag class: "btn btn-default" do %>
            <span class="glyphicon glyphicon-search"></span>
          <% end %>
        </div>
      </div>
    <% end %>
  </div>
  <%= search_form_for @search, url: admin_products_path, class: "col-md-2 navbar-form" do |f| %>
    <%= select_tag :category_id, options_for_select(
      nested_set_options(Category, @category) {|cat| "#{'-' * cat.level} #{cat.name}"},
      params[:category_id]), {include_blank: t(".all_category"), class: "select form-control", id: "parent_category_search"} %>
    <%= f.submit "", class: "invisible" %>
  <% end %>
  <div class="col-md-2 navbar-form">
      <%= link_to new_admin_product_path(category_id: params[:category_id]), remote: true,
        class: "btn btn-success" do %>
        <span class="glyphicon glyphicon-plus-sign"></span>
        <%= t ".add_new_product" %>
      <% end %>
  </div>
</div>

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th class="text-left">
        <%= t ".number" %>
      </th>
      <th class="text-left">
        <%= t ".product_code" %>
      </th>
      <th class="text-left">
        <%= t ".name" %>
      </th>
      <th class="text-left">
        <%= t ".category_name" %>
      </th>
      <th class="text-left">
        <%= t ".price" %>
      </th>
      <th class="text-left">
        <%= t ".in_stock" %>
      </th>
      <th class="text-left">
        <%= t ".created_at" %>
      </th>
      <th class="text-left">
        <%= t ".option" %>
      </th>
    </tr>
  </thead>
  <tbody id="list">
    <%= render @products %>
  </tbody>
</table>
<div id="paging" class="text-center">
  <%= paginate @products, remote: true %>
</div>
